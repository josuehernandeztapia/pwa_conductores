import{d as j}from"./chunk-SO3QS7QP.js";import"./chunk-VKLMJP2F.js";import"./chunk-BYXBJQAS.js";import{$a as _,Ba as P,Cb as w,Fa as u,N as G,Nb as B,Ob as L,Pa as V,Pb as U,S as N,Tb as H,X as x,Y as f,Ya as d,Z as y,Za as i,_ as C,_a as n,db as D,fb as E,ga as I,hb as m,nb as M,ob as o,pb as p,qb as h,rb as O,sa as R,ta as r,wb as z,yb as F}from"./chunk-IDEEAVYW.js";import{a as b,b as S,c as A}from"./chunk-EQDQRRRY.js";var Ie={ruta_transporte:[{id:"acta_constitutiva",name:"Acta Constitutiva de la Ruta",status:"Pendiente",category:"legal",tooltip:"Documento que acredita la constituci\xF3n legal de la ruta/cooperativa"},{id:"rpp_inscription",name:"Inscripci\xF3n en Registro P\xFAblico de la Propiedad",status:"Pendiente",category:"legal",tooltip:"Registro oficial de la constituci\xF3n de la empresa"},{id:"estatutos_sociales",name:"Estatutos Sociales",status:"Pendiente",category:"legal",tooltip:"Reglamento interno de la organizaci\xF3n"},{id:"rfc_moral",name:"RFC de Persona Moral",status:"Pendiente",category:"fiscal",tooltip:"Registro Federal de Contribuyentes de la empresa"},{id:"constancia_fiscal",name:"Constancia de Situaci\xF3n Fiscal",status:"Pendiente",category:"fiscal",tooltip:"Situaci\xF3n fiscal actualizada ante el SAT"},{id:"comprobante_domicilio_fiscal",name:"Comprobante de Domicilio Fiscal",status:"Pendiente",category:"fiscal",tooltip:"Comprobante del domicilio fiscal registrado"},{id:"poder_representante",name:"Poder del Representante Legal",status:"Pendiente",category:"representative",tooltip:"Documento que acredita las facultades del representante legal"},{id:"ine_representante",name:"INE del Representante Legal",status:"Pendiente",category:"representative",tooltip:"Identificaci\xF3n oficial del representante legal"},{id:"curp_representante",name:"CURP del Representante Legal",status:"Pendiente",category:"representative",isOptional:!0,tooltip:"Clave \xDAnica de Registro de Poblaci\xF3n del representante"},{id:"concesion_transporte",name:"Concesi\xF3n de Transporte",status:"Pendiente",category:"operational",tooltip:"Permiso oficial para operar el transporte p\xFAblico"},{id:"padron_vehicular",name:"Padr\xF3n Vehicular de la Ruta",status:"Pendiente",category:"operational",tooltip:"Lista oficial de veh\xEDculos autorizados en la ruta"},{id:"carta_antiguedad",name:"Carta de Antig\xFCedad de la Ruta",status:"Pendiente",category:"operational",tooltip:"Documento que acredita la antig\xFCedad operando la ruta"}],cooperativa:[{id:"acta_constitutiva_coop",name:"Acta Constitutiva de la Cooperativa",status:"Pendiente",category:"legal"}],asociacion:[{id:"acta_constitutiva_asoc",name:"Acta Constitutiva de la Asociaci\xF3n",status:"Pendiente",category:"legal"}]};function k(s){return s.status==="activa"&&s.cartaAvalEnabled&&s.documents.filter(t=>t.status==="Aprobado").length>=8}var T=class s{ecosystems=I([]);collectiveGroups=I([]);clients=I([]);allEcosystems=w(()=>this.ecosystems());activeEcosystems=w(()=>this.ecosystems().filter(t=>t.status==="activa"));ecosystemsWithCartaAvalEnabled=w(()=>this.ecosystems().filter(t=>k(t)));constructor(){this.loadData()}loadData(){let t=localStorage.getItem("ecosystems");t&&this.ecosystems.set(JSON.parse(t));let e=localStorage.getItem("collectiveGroups");e&&this.collectiveGroups.set(JSON.parse(e));let c=localStorage.getItem("clients");c&&this.clients.set(JSON.parse(c))}saveData(){localStorage.setItem("ecosystems",JSON.stringify(this.ecosystems())),localStorage.setItem("collectiveGroups",JSON.stringify(this.collectiveGroups())),localStorage.setItem("clients",JSON.stringify(this.clients()))}createEcosystem(t){let e=[...this.ecosystems(),t];this.ecosystems.set(e),this.saveData()}updateEcosystem(t){let e=this.ecosystems().map(c=>c.id===t.id?t:c);this.ecosystems.set(e),this.saveData()}getEcosystem(t){return this.ecosystems().find(e=>e.id===t)}deleteEcosystem(t){this.removeEcosystemRelations(t);let e=this.ecosystems().filter(c=>c.id!==t);this.ecosystems.set(e),this.saveData()}removeEcosystemRelations(t){let e=this.collectiveGroups().filter(a=>a.ecosystemId!==t);this.collectiveGroups.set(e);let c=this.clients().map(a=>{if(a.ecosystemId===t){let l=a,{ecosystemId:v,ecosystemName:g,cartaAvalId:Ce}=l;return A(l,["ecosystemId","ecosystemName","cartaAvalId"])}return a});this.clients.set(c)}issueCartaAval(t,e){let c=this.getEcosystem(t);if(!c||!k(c))return null;let a=S(b({},e),{id:`carta_${Date.now()}`,ecosystemId:t}),l=S(b({},c),{issuedCartasAval:[...c.issuedCartasAval,a],lastUpdated:new Date});return this.updateEcosystem(l),a}getCartasAvalByEcosystem(t){return this.getEcosystem(t)?.issuedCartasAval||[]}updateCartaAvalStatus(t,e,c){let a=this.getEcosystem(t);if(!a)return;let l=a.issuedCartasAval.map(g=>g.id===e?S(b({},g),{status:c}):g),v=S(b({},a),{issuedCartasAval:l,lastUpdated:new Date});this.updateEcosystem(v)}createCollectiveGroup(t){let e=S(b({},t),{id:`group_${Date.now()}`,createdAt:new Date,lastUpdated:new Date}),c=[...this.collectiveGroups(),e];return this.collectiveGroups.set(c),this.saveData(),e}updateCollectiveGroup(t){let e=this.collectiveGroups().map(c=>c.id===t.id?S(b({},t),{lastUpdated:new Date}):c);this.collectiveGroups.set(e),this.saveData()}getCollectiveGroupsByEcosystem(t){return this.collectiveGroups().filter(e=>e.ecosystemId===t)}deleteCollectiveGroup(t){let e=this.clients().map(a=>{if(a.collectiveCreditGroupId===t){let l=a,{collectiveCreditGroupId:v}=l;return A(l,["collectiveCreditGroupId"])}return a});this.clients.set(e);let c=this.collectiveGroups().filter(a=>a.id!==t);this.collectiveGroups.set(c),this.saveData()}assignClientToEcosystem(t,e,c){let a=this.getEcosystem(e);if(!a)return;let l=this.clients().map(v=>v.id===t?S(b({},v),{ecosystemId:e,ecosystemName:a.name,cartaAvalId:c}):v);this.clients.set(l),this.saveData()}getClientsByEcosystem(t){return this.clients().filter(e=>e.ecosystemId===t)}getEcosystemStats(t){let e=this.getEcosystem(t);if(!e)return{totalClients:0,activeGroups:0,issuedCartasAval:0,pendingDocuments:0,completionPercentage:0};let c=this.getClientsByEcosystem(t),l=this.getCollectiveGroupsByEcosystem(t).filter(g=>g.phase!=="completed"),v=e.documents.filter(g=>g.status==="Pendiente").length;return{totalClients:c.length,activeGroups:l.length,issuedCartasAval:e.issuedCartasAval.length,pendingDocuments:v,completionPercentage:this.calculateCompletionPercentage(e)}}calculateCompletionPercentage(t){let e=t.onboardingStages.length,c=t.onboardingStages.filter(a=>a.status==="completed").length;return e>0?Math.round(c/e*100):0}generateDemoEcosystems(){let t=[{id:"eco_ruta25",name:"Ruta 25 Los Pinos",type:"ruta_transporte",status:"activa",email:"contacto@ruta25pinos.com",phone:"55 1234 5678",address:{street:"Av. Los Pinos 123",city:"Toluca",state:"M\xE9xico",zipCode:"50100",country:"M\xE9xico"},businessName:"Transportes Los Pinos S.A. de C.V.",rfc:"TLP980101XXX",constitutionDate:new Date("1998-01-01"),registrationNumber:"RPP-001234",legalRepresentatives:[{id:"rep_001",name:"Juan Carlos Mendoza",position:"Presidente",rfc:"MENJ750815XXX",curp:"MENJ750815HMCNDR05",documents:[],isActive:!0}],primaryRepresentativeId:"rep_001",routes:[{id:"route_001",routeNumber:"25",routeName:"Los Pinos - Centro",origin:"Los Pinos",destination:"Centro Toluca",permitNumber:"SCT-25-2020",issuedBy:"Secretar\xEDa de Comunicaciones y Transportes",validFrom:new Date("2020-01-01"),validTo:new Date("2025-12-31"),vehicleCapacity:45,operatingDays:["lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],status:"vigente"}],operatingRegion:"Estado de M\xE9xico",totalMembers:45,activeMembers:42,documents:[],onboardingStages:[],currentStage:"",monthlyRevenue:25e5,averageAge:8,fleetSize:45,registeredAt:new Date("2023-01-15"),approvedAt:new Date("2023-02-01"),lastUpdated:new Date,createdBy:"asesor_demo",assignedAsesorId:"asesor_demo",cartaAvalEnabled:!0,cartaAvalTemplate:"template_standard",issuedCartasAval:[]},{id:"eco_coop_norte",name:"Cooperativa Norte",type:"cooperativa",status:"activa",email:"info@coopnorte.com",phone:"55 9876 5432",address:{street:"Calle Norte 456",city:"Naucalpan",state:"M\xE9xico",zipCode:"53000",country:"M\xE9xico"},businessName:"Cooperativa de Transportes del Norte S.C. de R.L.",rfc:"CTN950301XXX",constitutionDate:new Date("1995-03-01"),registrationNumber:"COOP-002567",legalRepresentatives:[{id:"rep_002",name:"Mar\xEDa Elena Gonz\xE1lez",position:"Representante Legal",rfc:"GONM680920XXX",curp:"GONM680920MMCNRL08",documents:[],isActive:!0}],primaryRepresentativeId:"rep_002",routes:[],operatingRegion:"Estado de M\xE9xico",totalMembers:28,activeMembers:26,documents:[],onboardingStages:[],currentStage:"",monthlyRevenue:18e5,averageAge:6,fleetSize:28,registeredAt:new Date("2023-03-10"),approvedAt:new Date("2023-03-25"),lastUpdated:new Date,createdBy:"asesor_demo",assignedAsesorId:"asesor_demo",cartaAvalEnabled:!0,cartaAvalTemplate:"template_standard",issuedCartasAval:[{id:"ca_001",ecosystemId:"eco_ruta25",clientId:"demo-client-1",clientName:"Juan P\xE9rez Garc\xEDa",issuedDate:new Date("2024-01-20"),validUntil:new Date("2024-07-20"),amount:18e4,purpose:"venta_plazo",status:"vigente",issuedBy:"rep_001",documentUrl:"https://docs.example.com/ca_001.pdf",notes:"Carta aval para venta a plazo de unidad H6C"},{id:"ca_002",ecosystemId:"eco_ruta25",clientId:"demo-client-2",clientName:"Mar\xEDa Rodr\xEDguez L\xF3pez",issuedDate:new Date("2024-01-25"),validUntil:new Date("2024-10-25"),amount:12e4,purpose:"ahorro_programado",status:"vigente",issuedBy:"rep_001",documentUrl:"https://docs.example.com/ca_002.pdf",notes:"Carta aval para plan de ahorro programado"},{id:"ca_003",ecosystemId:"eco_ruta25",clientId:"demo-client-3",clientName:"Carlos Mendoza Silva",issuedDate:new Date("2024-01-15"),validUntil:new Date("2024-12-15"),amount:15e4,purpose:"credito_colectivo",status:"vigente",issuedBy:"rep_001",documentUrl:"https://docs.example.com/ca_003.pdf",notes:"Carta aval para cr\xE9dito colectivo - Primera Tanda"},{id:"ca_group_001",ecosystemId:"eco_ruta25",clientId:"demo-group-1",clientName:"Ruta 25 - Primera Tanda (Grupal)",issuedDate:new Date("2024-01-15"),validUntil:new Date("2025-01-15"),amount:75e4,purpose:"credito_colectivo",status:"vigente",issuedBy:"rep_001",documentUrl:"https://docs.example.com/ca_group_001.pdf",notes:"Carta aval grupal para tanda de 5 miembros"}]},{id:"eco_coop_norte",name:"Cooperativa Norte",type:"cooperativa",status:"activa",email:"info@coopnorte.com",phone:"55 9876 5432",address:{street:"Calle Norte 456",city:"Naucalpan",state:"M\xE9xico",zipCode:"53000",country:"M\xE9xico"},businessName:"Cooperativa de Transportes del Norte S.C. de R.L.",rfc:"CTN950301XXX",constitutionDate:new Date("1995-03-01"),registrationNumber:"COOP-002567",legalRepresentatives:[{id:"rep_002",name:"Mar\xEDa Elena Gonz\xE1lez",position:"Representante Legal",rfc:"GONM680920XXX",curp:"GONM680920MMCNRL08",documents:[],isActive:!0}],primaryRepresentativeId:"rep_002",routes:[],operatingRegion:"Estado de M\xE9xico",totalMembers:28,activeMembers:26,documents:[],onboardingStages:[],currentStage:"",monthlyRevenue:18e5,averageAge:6,fleetSize:28,registeredAt:new Date("2023-03-10"),approvedAt:new Date("2023-03-25"),lastUpdated:new Date,createdBy:"asesor_demo",assignedAsesorId:"asesor_demo",cartaAvalEnabled:!0,cartaAvalTemplate:"template_standard",issuedCartasAval:[{id:"ca_004",ecosystemId:"eco_coop_norte",clientId:"demo-client-4",clientName:"Ana Patricia Vega",issuedDate:new Date("2024-02-10"),validUntil:new Date("2024-08-10"),amount:749e3,purpose:"venta_plazo",status:"utilizada",issuedBy:"rep_002",documentUrl:"https://docs.example.com/ca_004.pdf",notes:"Carta aval para venta directa - Ya utilizada"},{id:"ca_005",ecosystemId:"eco_coop_norte",clientId:"demo-client-5",clientName:"Roberto Hern\xE1ndez Cruz",issuedDate:new Date("2024-02-15"),validUntil:new Date("2024-11-15"),amount:12e4,purpose:"ahorro_programado",status:"vigente",issuedBy:"rep_002",documentUrl:"https://docs.example.com/ca_005.pdf",notes:"Carta aval para plan de ahorro programado"},{id:"ca_group_002",ecosystemId:"eco_coop_norte",clientId:"demo-group-2",clientName:"Cooperativa Norte - Segunda Tanda (Grupal)",issuedDate:new Date("2024-02-01"),validUntil:new Date("2025-02-01"),amount:84e4,purpose:"credito_colectivo",status:"vigente",issuedBy:"rep_002",documentUrl:"https://docs.example.com/ca_group_002.pdf",notes:"Carta aval grupal para tanda de 6 miembros"}]}];this.ecosystems.set(t),this.saveData()}updateDemoCollectiveGroups(){let t=this.collectiveGroups().map(e=>S(b({},e),{ecosystemId:e.ecosystemId||"eco_ruta25",ecosystemName:e.ecosystemName||"Ruta 25 Los Pinos",createdAt:e.createdAt||new Date,lastUpdated:e.lastUpdated||new Date}));this.collectiveGroups.set(t),this.saveData()}updateDemoClients(){let t=this.ecosystems();if(t.length===0)return;let e=this.clients().map((c,a)=>{let l=a%t.length,v=t[l];return S(b({},c),{ecosystemId:v.id,ecosystemName:v.name})});this.clients.set(e),this.saveData()}static \u0275fac=function(e){return new(e||s)};static \u0275prov=G({token:s,factory:s.\u0275fac,providedIn:"root"})};function $(s,t){if(s&1){let e=D();i(0,"div",11),y(),i(1,"svg",12),_(2,"path",13),n(),C(),i(3,"h3",14),o(4,"No hay ecosistemas registrados"),n(),i(5,"p",15),o(6,"Comienza registrando tu primera ruta o cooperativa"),n(),i(7,"div",16)(8,"button",17),E("click",function(){x(e);let a=m(2);return f(a.createNewEcosystem())}),o(9," Registrar Ecosistema "),n()()()}}function J(s,t){s&1&&(i(0,"div",41),y(),i(1,"svg",35),_(2,"path",42),n(),o(3," Habilitado para Carta Aval "),n())}function W(s,t){if(s&1){let e=D();i(0,"div",20),E("click",function(){let a=x(e).$implicit,l=m(3);return f(l.viewEcosystemDetails(a))}),i(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24),y(),i(5,"svg",25),_(6,"path",26),n()(),C(),i(7,"div")(8,"h3",27),o(9),n(),i(10,"p",28),o(11),n()()(),i(12,"span",29),o(13),n()(),i(14,"div",30)(15,"div",31)(16,"div",4),o(17),n(),i(18,"div",32),o(19,"Miembros"),n()(),i(20,"div",31)(21,"div",4),o(22),n(),i(23,"div",32),o(24,"Unidades"),n()()(),i(25,"div",33)(26,"div",34),y(),i(27,"svg",35),_(28,"path",13),n(),o(29),n(),C(),i(30,"div",34),y(),i(31,"svg",35),_(32,"path",36),n(),o(33),n(),u(34,J,4,0,"div",37),n(),C(),i(35,"div",38)(36,"button",39),E("click",function(a){let l=x(e).$implicit;return m(3).editEcosystem(l),f(a.stopPropagation())}),o(37," Editar "),n(),i(38,"button",40),E("click",function(a){return x(e),f(a.stopPropagation())}),o(39," Ver Detalles "),n()()()()}if(s&2){let e=t.$implicit,c=m(3);r(6),V("d",c.getTypeIcon(e.type)),r(3),p(e.name),r(2),p(e.operatingRegion),r(),M(c.getStatusClass(e.status)),r(),h(" ",c.getStatusText(e.status)," "),r(4),p(e.totalMembers),r(5),p(e.fleetSize),r(7),h(" RFC: ",e.rfc," "),r(4),h(" ",e.legalRepresentatives.length," Representante(s) "),r(),d("ngIf",e.cartaAvalEnabled)}}function Y(s,t){if(s&1&&(i(0,"div",18),u(1,W,40,11,"div",19),n()),s&2){let e=m(2);r(),d("ngForOf",e.ecosystems())("ngForTrackBy",e.trackByEcosystemId)}}function Q(s,t){if(s&1){let e=D();i(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),o(4,"Ecosistemas"),n(),i(5,"p",5),o(6,"Rutas, cooperativas y asociaciones registradas"),n()(),i(7,"button",6),E("click",function(){x(e);let a=m();return f(a.createNewEcosystem())}),y(),i(8,"svg",7),_(9,"path",8),n(),o(10," Nuevo Ecosistema "),n()(),u(11,$,10,0,"div",9)(12,Y,2,2,"div",10),n()}if(s&2){let e=m();r(11),d("ngIf",e.ecosystems().length===0),r(),d("ngIf",e.ecosystems().length>0)}}function K(s,t){if(s&1&&(i(0,"div",55)(1,"div",56)(2,"div",23)(3,"div",57),y(),i(4,"svg",58),_(5,"path",36),n()(),C(),i(6,"div",59)(7,"p",60),o(8,"Clientes"),n(),i(9,"p",61),o(10),n()()()(),i(11,"div",56)(12,"div",23)(13,"div",62),y(),i(14,"svg",63),_(15,"path",64),n()(),C(),i(16,"div",59)(17,"p",60),o(18,"Grupos Activos"),n(),i(19,"p",61),o(20),n()()()(),i(21,"div",56)(22,"div",23)(23,"div",65),y(),i(24,"svg",66),_(25,"path",67),n()(),C(),i(26,"div",59)(27,"p",60),o(28,"Cartas Aval"),n(),i(29,"p",61),o(30),n()()()(),i(31,"div",56)(32,"div",23)(33,"div",68),y(),i(34,"svg",69),_(35,"path",70),n()(),C(),i(36,"div",59)(37,"p",60),o(38,"Completitud"),n(),i(39,"p",61),o(40),n()()()()()),s&2){let e=m(2);r(10),p(e.ecosystemStats().totalClients),r(10),p(e.ecosystemStats().activeGroups),r(10),p(e.ecosystemStats().issuedCartasAval),r(10),h("",e.ecosystemStats().completionPercentage,"%")}}function Z(s,t){s&1&&(i(0,"span"),o(1,"Informaci\xF3n"),n())}function ee(s,t){if(s&1&&(i(0,"span"),o(1),n()),s&2){let e=m(3);r(),h("Grupos (",e.ecosystemGroups().length,")")}}function te(s,t){if(s&1&&(i(0,"span"),o(1),n()),s&2){let e=m(3);r(),h("Clientes (",e.ecosystemClients().length,")")}}function ie(s,t){if(s&1&&(i(0,"span"),o(1),n()),s&2){let e=m(3);r(),h("Cartas Aval (",e.ecosystemCartasAval().length,")")}}function ne(s,t){if(s&1){let e=D();i(0,"button",71),E("click",function(){let a=x(e).$implicit,l=m(2);return f(l.selectTab(a))}),u(1,Z,2,0,"span",54)(2,ee,2,1,"span",54)(3,te,2,1,"span",54)(4,ie,2,1,"span",54),n()}if(s&2){let e=t.$implicit,c=m(2);M(c.selectedTab()===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),r(),d("ngIf",e==="info"),r(),d("ngIf",e==="groups"),r(),d("ngIf",e==="clients"),r(),d("ngIf",e==="cartas")}}function se(s,t){s&1&&(i(0,"span",81),o(1," Principal "),n())}function ae(s,t){if(s&1&&(i(0,"div",77)(1,"div",78)(2,"div")(3,"p",79),o(4),n(),i(5,"p",28),o(6),n()(),u(7,se,2,0,"span",80),n()()),s&2){let e,c=t.$implicit,a=m(3);r(4),p(c.name),r(2),p(c.position),r(),d("ngIf",((e=a.selectedEcosystem())==null?null:e.primaryRepresentativeId)===c.id)}}function oe(s,t){if(s&1&&(i(0,"div")(1,"div",72)(2,"div")(3,"h3",73),o(4,"Informaci\xF3n General"),n(),i(5,"dl",74)(6,"div")(7,"dt",60),o(8,"RFC"),n(),i(9,"dd",75),o(10),n()(),i(11,"div")(12,"dt",60),o(13,"Email"),n(),i(14,"dd",75),o(15),n()(),i(16,"div")(17,"dt",60),o(18,"Tel\xE9fono"),n(),i(19,"dd",75),o(20),n()(),i(21,"div")(22,"dt",60),o(23,"Regi\xF3n de Operaci\xF3n"),n(),i(24,"dd",75),o(25),n()()()(),i(26,"div")(27,"h3",73),o(28,"Representantes Legales"),n(),i(29,"div",74),u(30,ae,8,3,"div",76),n()()()()),s&2){let e,c,a,l,v,g=m(2);r(10),p((e=g.selectedEcosystem())==null?null:e.rfc),r(5),p((c=g.selectedEcosystem())==null?null:c.email),r(5),p((a=g.selectedEcosystem())==null?null:a.phone),r(5),p((l=g.selectedEcosystem())==null?null:l.operatingRegion),r(5),d("ngForOf",(v=g.selectedEcosystem())==null?null:v.legalRepresentatives)}}function re(s,t){s&1&&(i(0,"div",86)(1,"p",87),o(2,"No hay grupos colectivos registrados"),n()())}function ce(s,t){if(s&1){let e=D();i(0,"div",90),E("click",function(){let a=x(e).$implicit,l=m(4);return f(l.viewGroup(a))}),i(1,"div",91)(2,"div")(3,"h4",79),o(4),n(),i(5,"p",28),o(6),n()(),i(7,"span",81),o(8),n()()()}if(s&2){let e=t.$implicit;r(4),p(e.name),r(2),O("",e.members.length,"/",e.capacity," miembros"),r(2),h(" ",e.phase||"saving"," ")}}function le(s,t){if(s&1&&(i(0,"div",88),u(1,ce,9,4,"div",89),n()),s&2){let e=m(3);r(),d("ngForOf",e.ecosystemGroups())}}function de(s,t){if(s&1){let e=D();i(0,"div")(1,"div",3)(2,"h3",82),o(3,"Grupos Colectivos"),n(),i(4,"button",83),E("click",function(){x(e);let a=m(2);return f(a.createNewGroup())}),o(5," Crear Grupo "),n()(),u(6,re,3,0,"div",84)(7,le,2,1,"div",85),n()}if(s&2){let e=m(2);r(6),d("ngIf",e.ecosystemGroups().length===0),r(),d("ngIf",e.ecosystemGroups().length>0)}}function me(s,t){s&1&&(i(0,"div",86)(1,"p",87),o(2,"No hay clientes asignados a este ecosistema"),n()())}function pe(s,t){if(s&1&&(i(0,"div",96)(1,"div",23),_(2,"img",97),i(3,"div")(4,"p",79),o(5),n(),i(6,"p",28),o(7),n()()()()),s&2){let e=t.$implicit;r(2),d("src",e.avatarUrl,R)("alt",e.name),r(3),p(e.name),r(2),p(e.status)}}function ue(s,t){if(s&1&&(i(0,"div",94),u(1,pe,8,4,"div",95),n()),s&2){let e=m(3);r(),d("ngForOf",e.ecosystemClients())}}function ve(s,t){if(s&1&&(i(0,"div")(1,"h3",92),o(2,"Clientes del Ecosistema"),n(),u(3,me,3,0,"div",84)(4,ue,2,1,"div",93),n()),s&2){let e=m(2);r(3),d("ngIf",e.ecosystemClients().length===0),r(),d("ngIf",e.ecosystemClients().length>0)}}function ge(s,t){if(s&1){let e=D();i(0,"button",100),E("click",function(){x(e);let a=m(3);return f(a.issueCartaAval())}),o(1," Emitir Carta Aval "),n()}}function _e(s,t){s&1&&(i(0,"div",101)(1,"div",102),y(),i(2,"svg",103),_(3,"path",104),n(),C(),i(4,"div")(5,"h3",105),o(6,"Funcionalidad no habilitada"),n(),i(7,"p",106),o(8," Este ecosistema a\xFAn no tiene habilitada la emisi\xF3n de cartas aval. Complete el expediente para habilitar esta funci\xF3n. "),n()()()())}function ye(s,t){s&1&&(i(0,"div",86)(1,"p",87),o(2,"No se han emitido cartas aval"),n()())}function xe(s,t){if(s&1&&(i(0,"div",96)(1,"div",91)(2,"div")(3,"h4",79),o(4),n(),i(5,"p",28),o(6),n(),i(7,"p",107),o(8),z(9,"date"),n()(),i(10,"span",108),o(11),n()()()),s&2){let e=t.$implicit;r(4),p(e.clientName),r(2),p(e.purpose),r(2),h("Emitida: ",F(9,4,e.issuedDate,"short")),r(3),h(" ",e.status," ")}}function fe(s,t){if(s&1&&(i(0,"div",88),u(1,xe,12,7,"div",95),n()),s&2){let e=m(3);r(),d("ngForOf",e.ecosystemCartasAval())}}function Ee(s,t){if(s&1&&(i(0,"div")(1,"div",3)(2,"h3",82),o(3,"Cartas Aval Emitidas"),n(),u(4,ge,2,0,"button",98),n(),u(5,_e,9,0,"div",99)(6,ye,3,0,"div",84)(7,fe,2,1,"div",85),n()),s&2){let e,c,a,l=m(2);r(4),d("ngIf",(e=l.selectedEcosystem())==null?null:e.cartaAvalEnabled),r(),d("ngIf",!((c=l.selectedEcosystem())!=null&&c.cartaAvalEnabled)),r(),d("ngIf",l.ecosystemCartasAval().length===0&&((a=l.selectedEcosystem())==null?null:a.cartaAvalEnabled)),r(),d("ngIf",l.ecosystemCartasAval().length>0)}}function he(s,t){if(s&1){let e=D();i(0,"div",2)(1,"div",43)(2,"div",23)(3,"button",44),E("click",function(){x(e);let a=m();return f(a.goBackToList())}),y(),i(4,"svg",45),_(5,"path",46),n()(),C(),i(6,"div")(7,"h1",4),o(8),n(),i(9,"p",5),o(10),n()()(),i(11,"div",47)(12,"span",48),o(13),n(),i(14,"button",17),E("click",function(){x(e);let a=m();return f(a.editEcosystem(a.selectedEcosystem()))}),o(15," Editar "),n()()(),u(16,K,41,4,"div",49),i(17,"div",50)(18,"div",51)(19,"nav",52),u(20,ne,5,6,"button",53),n()(),i(21,"div",21),u(22,oe,31,5,"div",54)(23,de,8,2,"div",54)(24,ve,5,2,"div",54)(25,Ee,8,4,"div",54),n()()()}if(s&2){let e,c,a=m();r(8),p((e=a.selectedEcosystem())==null?null:e.name),r(2),p((c=a.selectedEcosystem())==null?null:c.businessName),r(2),M(a.getStatusClass(a.selectedEcosystem().status)),r(),h(" ",a.getStatusText(a.selectedEcosystem().status)," "),r(3),d("ngIf",a.ecosystemStats()),r(4),d("ngForOf",a.validTabs),r(2),d("ngIf",a.selectedTab()==="info"),r(),d("ngIf",a.selectedTab()==="groups"),r(),d("ngIf",a.selectedTab()==="clients"),r(),d("ngIf",a.selectedTab()==="cartas")}}var X=class s{ecosystemService=N(T);router=N(j);ecosystems=w(()=>this.ecosystemService.allEcosystems());selectedEcosystem=I(null);viewMode=I("list");selectedTab=I("info");ecosystemStats=w(()=>{let t=this.selectedEcosystem();return t?this.ecosystemService.getEcosystemStats(t.id):null});ecosystemGroups=w(()=>{let t=this.selectedEcosystem();return t?this.ecosystemService.getCollectiveGroupsByEcosystem(t.id):[]});ecosystemClients=w(()=>{let t=this.selectedEcosystem();return t?this.ecosystemService.getClientsByEcosystem(t.id):[]});ecosystemCartasAval=w(()=>{let t=this.selectedEcosystem();return t?this.ecosystemService.getCartasAvalByEcosystem(t.id):[]});ngOnInit(){this.ecosystems().length===0&&this.generateDemoData()}generateDemoData(){this.ecosystemService.generateDemoEcosystems(),this.ecosystemService.updateDemoCollectiveGroups(),this.ecosystemService.updateDemoClients()}viewEcosystemDetails(t){this.selectedEcosystem.set(t),this.viewMode.set("details")}goBackToList(){this.viewMode.set("list"),this.selectedEcosystem.set(null),this.selectedTab.set("info")}createNewEcosystem(){this.router.navigate(["/ecosystem-onboarding"])}editEcosystem(t){this.router.navigate(["/ecosystem-onboarding"],{queryParams:{id:t.id}})}validTabs=["info","groups","clients","cartas"];selectTab(t){this.selectedTab.set(t)}getStatusClass(t){switch(t){case"activa":return"bg-green-100 text-green-800";case"aprobada":return"bg-blue-100 text-blue-800";case"expediente_en_revision":return"bg-yellow-100 text-yellow-800";case"suspendida":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}getStatusText(t){switch(t){case"activa":return"Activa";case"aprobada":return"Aprobada";case"expediente_en_revision":return"En Revisi\xF3n";case"suspendida":return"Suspendida";default:return"Registro Inicial"}}getTypeIcon(t){switch(t){case"ruta_transporte":return"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z";case"cooperativa":return"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z";case"asociacion":return"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4";default:return"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"}}createNewGroup(){let t=this.selectedEcosystem();t&&this.router.navigate(["/grupos-colectivos/nuevo"],{queryParams:{ecosystemId:t.id}})}viewGroup(t){this.router.navigate(["/grupos-colectivos",t.id])}issueCartaAval(){let t=this.selectedEcosystem();t&&this.router.navigate(["/carta-aval/nueva"],{queryParams:{ecosystemId:t.id}})}trackByEcosystemId(t,e){return e.id}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=P({type:s,selectors:[["app-ecosistemas"]],decls:3,vars:2,consts:[[1,"min-h-screen","bg-gray-50","p-4"],["class","max-w-6xl mx-auto",4,"ngIf"],[1,"max-w-6xl","mx-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","text-center py-12",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","rounded-lg","shadow","hover:shadow-md","transition-shadow","cursor-pointer",3,"click"],[1,"p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center","mr-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"text-center"],[1,"text-xs","text-gray-500"],[1,"space-y-2"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["class","flex items-center text-sm text-green-600",4,"ngIf"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"text-blue-600","hover:text-blue-800","text-sm","font-medium","mr-4",3,"click"],[1,"text-gray-600","hover:text-gray-800","text-sm","font-medium",3,"click"],[1,"flex","items-center","text-sm","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","items-center","justify-between","mb-6"],[1,"mr-4","p-2","text-gray-600","hover:text-gray-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","items-center","space-x-2"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium"],["class","grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",4,"ngIf"],[1,"bg-white","rounded-lg","shadow"],[1,"border-b","border-gray-200"],[1,"flex","space-x-8","px-6"],["class","py-4 px-1 border-b-2 font-medium text-sm transition-colors",3,"class","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"w-12","h-12","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"py-4","px-1","border-b-2","font-medium","text-sm","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"text-lg","font-semibold","mb-4"],[1,"space-y-3"],[1,"text-sm","text-gray-900"],["class","border border-gray-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-3"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-gray-900"],["class","bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",4,"ngIf"],[1,"bg-blue-100","text-blue-800","text-xs","px-2","py-1","rounded-full"],[1,"text-lg","font-semibold"],[1,"bg-green-600","text-white","px-4","py-2","rounded-lg","hover:bg-green-700",3,"click"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-center","py-8"],[1,"text-gray-500"],[1,"space-y-4"],["class","border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-4","hover:bg-gray-50","cursor-pointer",3,"click"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-semibold","mb-6"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","border border-gray-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"w-10","h-10","rounded-full","mr-3",3,"src","alt"],["class","bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",3,"click",4,"ngIf"],["class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",4,"ngIf"],[1,"bg-purple-600","text-white","px-4","py-2","rounded-lg","hover:bg-purple-700",3,"click"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-400","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","font-medium","text-yellow-800"],[1,"text-sm","text-yellow-700","mt-1"],[1,"text-xs","text-gray-400"],[1,"bg-green-100","text-green-800","text-xs","px-2","py-1","rounded-full"]],template:function(e,c){e&1&&(i(0,"div",0),u(1,Q,13,2,"div",1)(2,he,26,11,"div",1),n()),e&2&&(r(),d("ngIf",c.viewMode()==="list"),r(),d("ngIf",c.viewMode()==="details"&&c.selectedEcosystem()))},dependencies:[H,B,L,U],styles:[".ecosistemas-container[_ngcontent-%COMP%]{padding:2rem;background-color:#030712;min-height:100vh;color:#e5e7eb}.ecosistemas-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 .5rem}.ecosistemas-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af;margin:0 0 2rem}.placeholder-content[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;background:linear-gradient(135deg,#1f2937,#374151);border-radius:12px;border:1px solid #374151}.placeholder-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af;font-size:1.1rem;margin:0}"]})};export{X as EcosistemasComponent};
